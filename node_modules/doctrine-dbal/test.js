var MySQLPlatform = require('./lib/Platforms/MySQLPlatform.js');
var MySQLConnection = require('./lib/Connections/MySQLConnection.js');
var MySQLSchemaManager = require('./lib/SchemaManagers/MySQLSchemaManager.js');
var Comparator = require('./lib/Schema/Comparator.js');
var Schema = require('./lib/Schema/Schema.js');

var params = {
  host:     'localhost',
  user:     'root',
  password: '1qaz2wsx',
  database: 'node-doctrine-dbal'
};
var conn = new MySQLConnection(params);
var platform = new MySQLPlatform();
var sm = new MySQLSchemaManager(conn, platform);

sm.createSchema()
  .then(function(schema) {
    console.log(schema);

    var comparator = new Comparator();

    console.log(comparator.compare(new Schema, schema).toSql(platform));

    conn.disconnect();
  }).catch(function(error) {
    console.log(error);
  });

/*
sm.dropAndCreateDatabase('try-me')
  .then(function(results) {
    console.log(results);

    conn.disconnect();
  });
*/

/*
sm._execSql(['SELECT * FROM `demo`', 'UPDATE `demo` SET `title`="foo2" WHERE `id`=1'])
  .then(function(results) {
    console.log(results);

    conn.disconnect();
  });
*/

/*
sm.listTables()
  .then(function(tables) {
    console.log(tables);

    conn.disconnect();
  })
  .catch(function(error) {
    console.log(error);
    conn.disconnect();
  })
  //.then(function() {
  //  conn.disconnect();
  //})
;
*/

/*
sm.listTableNames()
  .then(function(tableNames) {
    console.log(tableNames);

    return sm.tablesExist(['DEmo'])
      .then(function(result) {
        console.log(result);
      });
  })
  .then(function() {
    return sm.listTableColumns('demo')
      .then(function(columns) {
        console.log(columns);
      });
  })
  .then(function() {
    conn.disconnect();
  })
;
*/
